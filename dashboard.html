<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>لوحة إدارة البورتفوليو</title>
  <link rel="stylesheet" href="styles.css" />

  <style>
    /* ====== إصلاح شريط التقدم ====== */

    .progress-bar-wrapper {
      width: 100%;
      height: 14px;
      border-radius: 20px;
      background: rgba(255,255,255,0.15);
      overflow: hidden;
      margin-top: 10px;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #4AB0FF, #0EA5E9);
      transition: width 0.15s linear;
    }

    #uploadProgressText {
      font-size: 14px;
      margin-top: 6px;
      color: #5df;
      text-align:center;
    }
  </style>
</head>

<body>
  <div class="shell">

    <header>
      <h1>لوحة إدارة البورتفوليو</h1>
      <p>إدارة الفيديو التعريفي + إضافة وتعديل المشاريع + رفع الصور والفيديوهات</p>
    </header>

    <main>

      <!-- رفع الفيديو التعريفي -->
      <section class="block glass">
        <div class="block-header">
          <div>
            <h2><span class="accent-dot"></span> رفع الفيديو التعريفي</h2>
            <div class="block-subtitle">الفيديو سيظهر في الصفحة الرئيسية تلقائيًا</div>
          </div>
        </div>

        <form id="introVideoForm">
          <div class="field-group">
            <label>اختر ملف MP4</label>
            <input type="file" id="introVideoInput" accept="video/mp4" required />
          </div>

          <button type="submit" class="btn-primary btn-submit">رفع الفيديو</button>

          <div id="introUploadStatus" style="margin-top:10px;color:#6f9;"></div>
        </form>
      </section>


      <!-- إضافة مشروع جديد -->
      <section class="block glass">
        <div class="block-header">
          <div>
            <h2><span class="accent-dot"></span> إضافة مشروع جديد</h2>
            <div class="block-subtitle">
              سيظهر المشروع مباشرة في صفحة الخدمة المناسبة، مع صفحة تفاصيل خاصة به.
            </div>
          </div>
        </div>

        <form id="createProjectForm">

          <div class="field-group">
            <label>الخدمة</label>
            <select name="service_type" class="field-select" required>
              <option value="video">تحرير الفيديو</option>
              <option value="graphic">التصميم الجرافيكي</option>
              <option value="ai">تطبيقات الذكاء الصناعي</option>
              <option value="modeling">النمذجة ثلاثية الأبعاد</option>
            </select>
          </div>

          <div class="field-group">
            <label>عنوان المشروع</label>
            <input type="text" name="title" placeholder="اكتب عنوان المشروع" required />
          </div>

          <div class="field-group">
            <label>وصف مختصر</label>
            <textarea name="short_description" placeholder="وصف موجز..." required></textarea>
          </div>

          <div class="field-group">
            <label>وصف تفصيلي</label>
            <textarea name="full_description" placeholder="تفاصيل التنفيذ..." required></textarea>
          </div>

          <div class="field-group">
            <label>الصورة المصغّرة (Thumbnail)</label>
            <input type="file" id="thumbnailInput" accept="image/*" required />
          </div>

          <div class="field-group">
            <label>صور المعرض (Gallery)</label>
            <input type="file" id="galleryInput" accept="image/*,video/*" multiple />
          </div>

          <button type="submit" class="btn-primary btn-submit">إنشاء المشروع</button>
        </form>
      </section>


      <!-- رفع ملفات إضافية للمشروع -->
      <section class="block glass" id="uploadFilesForProject" style="display:none;">
        <div class="block-header">
          <h2><span class="accent-dot"></span> رفع ملفات للمشروع</h2>
        </div>

        <!-- اختيار الملفات -->
        <input type="file" id="fileInput" accept="image/*,video/*" multiple />

        <!-- شريط التقدم -->
        <div id="uploadProgressContainer" style="display:none; margin-top:20px;">

          <div class="progress-bar-wrapper">
            <div id="uploadProgressBar" class="progress-bar"></div>
          </div>

          <p id="uploadProgressText">0%</p>
        </div>
      </section>


      <!-- قائمة المشاريع -->
      <section class="block glass">
        <div class="block-header">
          <h2><span class="accent-dot"></span> المشاريع الحالية</h2>
        </div>

        <div id="projectList"></div>
      </section>

    </main>
  </div>

  <footer>
    © 2025 — لوحة الإدارة
  </footer>

  <script type="module" src="dashboard.js"></script>

</body>
</html>
